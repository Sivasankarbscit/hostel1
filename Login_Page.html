<!DOCTYPE html>
<html>
<head>
	<title>Animated Login Form</title>
	<link href="https://fonts.googleapis.com/css?family=Poppins:600&display=swap" rel="stylesheet">
	<script src="https://kit.fontawesome.com/a81368914c.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		*{
	padding: 0;
	margin: 0;
	box-sizing: border-box;
}

body{
    font-family: 'Poppins', sans-serif;
 
}
header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(45deg, #031743, #0b044e);
            color: white;
            padding: 15px 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

		h1 {
	display: block;
	text-align: center;
	text-decoration: none;
	color: #fff7f7;
	font-size: 25px;
	transition: .3s;
}

h2 {
	display: block;
	text-align: center;
	text-decoration: none;
	color: #05083f;
	font-size: 12px;
	transition: .3s;
}

h3 {
	display: block;
	text-align: center;
	text-decoration: none;
	color: #05083f;
	font-size: 12px;
	transition: .3s;
}

h4 {
	display: block;
	text-align: center;
	text-decoration: none;
	color: #05083f;
	font-size: 8px;
	transition: .3s;
}

.wave{
	position: fixed;
	bottom: 0;
	left: 0;
	height: 100%;
	z-index: -1;
}

.container{
    width: 100vw;
    height: 100vh;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-gap :7rem;
    padding: 0 2rem;
}

.img{
	
	justify-content: flex-end;
	align-items: center;
}

.login-content{
	
	justify-content: flex-start;
	align-items: center;
	text-align: center;
}

.img img{
	width: 500px;
}

form{
	width: 360px;
}

.login-content img{
    height: 80px;
}

.login-content h2{
	margin: 15px 0;
	color: #333;
	text-transform: uppercase;
	font-size: 2.9rem;
}

.login-content .input-div{
	position: relative;
    display: grid;
    grid-template-columns: 7% 93%;
    margin: 25px 0;
    padding: 5px 0;
    border-bottom: 2px solid #d9d9d9;
}

.login-content .input-div.one{
	margin-top: 0;
}

.i{
	color: #d9d9d9;
	display: flex;
	justify-content: center;
	align-items: center;
}

.i i{
	transition: .3s;
}

.input-div > div{
    position: relative;
	height: 45px;
}

.input-div > div > h5{
	position: absolute;
	left: 10px;
	top: 50%;
	transform: translateY(-50%);
	color: #999;
	font-size: 18px;
	transition: .3s;
}

.input-div:before, .input-div:after{
	content: '';
	position: absolute;
	bottom: -2px;
	width: 0%;
	height: 2px;
	background-color: #38d39f;
	transition: .4s;
}

.input-div:before{
	right: 50%;
}

.input-div:after{
	left: 50%;
}

.input-div.focus:before, .input-div.focus:after{
	width: 50%;
}

.input-div.focus > div > h5{
	top: -5px;
	font-size: 15px;
}

.input-div.focus > .i > i{
	color: #38d39f;
}

.input-div > div > input{
	position: absolute;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	border: none;
	outline: none;
	background: none;
	padding: 0.5rem 0.7rem;
	font-size: 1.2rem;
	color: #555;
	font-family: 'poppins', sans-serif;
}

.input-div.pass{
	margin-bottom: 4px;
}

a{
	display: block;
	text-align: right;
	text-decoration: none;
	color: #999;
	font-size: 0.9rem;
	transition: .3s;
}

a:hover{
	color: #38d39f;
}

.btn{
	display: block;
	width: 100%;
	height: 50px;
	border-radius: 25px;
	outline: none;
	border: none;
	background-image: linear-gradient(to right, #32be8f, #38d39f, #32be8f);
	background-size: 200%;
	font-size: 1.2rem;
	color: #fff;
	font-family: 'Poppins', sans-serif;
	text-transform: uppercase;
	margin: 1rem 0;
	cursor: pointer;
	transition: .5s;
}
.btn:hover{
	background-position: right;
}


@media screen and (max-width: 1050px){
	.container{
		grid-gap: 5rem;
	}
}

@media screen and (max-width: 1000px){
	form{
		width: 290px;
	}

	.login-content h2{
        font-size: 2.4rem;
        margin: 8px 0;
	}

	.img img{
		width: 400px;
	}
}

@media screen and (max-width: 1000px){
	.container{
		grid-template-columns: 1fr;
	}

	.img{
		display: none;
	}

	.wave{
		display: none;
	}

	.login-content{
		justify-content: center;
	}
}
.profile-photo {
            width: 45px;
            height: 45px;
            border-radius: 100%;
            margin-right: 10px;
            
            transition: transform 0.3s ease;
        }

        .profile-photo:hover {
            transform: scale(1.1);
        }

        .notification-icon, .back-icon, .edit-icon {
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .notification-icon:hover, .back-icon:hover, .edit-icon:hover {
            transform: rotate(15deg);
        }

		
        /* (Existing CSS styles remain unchanged) */
        /* Add spinner styles */
        #spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 200;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <header>
            <img src="https://portal.kongunaducollege.ac.in//uploads/banner/logo.png" alt="Profile Photo" class="profile-photo" id="profile">
            <h1>KASC HOSTEL</h1>
            <img src="https://kongunaducollege.ac.in/sites/kongunaducollege.ac.in/files/50years.png" alt="Profile Photo" class="profile-photo" id="profile">
        </header>
        <br>
        <h2>KONGUNADU ARTS AND SCIENCE COLLEGE</h2>
        <h3>(AUTONOMOUS)</h3>
        <h4>Re-accredited by NAAC with A+ Grade - 4th cycle, College of Excellence - UGC</h4>
        <h4>Coimbatore - 641 029, Tamil Nadu, India</h4>
        <br>
        <img class="wave" src="img/wave.png">
        <div class="container">
            <div class="img">
                <img src="img/bg.svg">
            </div>
            <div class="login-content">
                <form onsubmit="event.preventDefault(); login();">
                    <img src="https://cdn-icons-png.flaticon.com/128/4443/4443991.png">
                    <h2 class="title">Welcome</h2>
                    <div class="input-div one">
                        <div class="i">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="div">
                            <h5>Username</h5>
                            <input type="text" class="input" id="username" required>
                        </div>
                    </div>
                    <div class="input-div pass">
                        <div class="i">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="div">
                            <h5>Password</h5>
                            <input type="password" class="input" id="password" required>
                        </div>
                    </div>
                    <a href="#" onclick="forgetPassword(); return false;">Forgot Password?</a>
                    <input type="submit" class="btn" value="Login">
                    <input type="button" class="btn" value="Register" onclick="window.location.href='index.html'">
                </form>
                <div id="spinner">
                    <img src="spinner.gif" alt="Loading..."> <!-- Add your spinner GIF here -->
                </div>
            </div>
        </div>
    </div>
    <script>
        async function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const spinner = document.getElementById("spinner");

            // Display spinner
            spinner.style.display = "block";

            try {
                const response = await fetch('http://localhost:5000/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json', // Set the content type
                    },
                    body: JSON.stringify({ username, password }), // Send data as JSON string
                });

                const data = await response.json();

                // Hide spinner
                spinner.style.display = "none";

                if (response.ok) {
                    localStorage.setItem("token", data.token);
                    window.location.href = "./Students_Deshboard.html";
                } else {
                    alert('Error: ' + data.message);
                }
            } catch (error) {
                console.error(error);
                alert('An error occurred during login');
                // Hide spinner in case of an error
                spinner.style.display = "none";
            }
        }

        // Function for Forget Password button
        function forgetPassword() {
            alert("Please go and meet the warden to reset your password.");
        }
    </script>
</body>
</html>
